{"version":3,"file":"mini-vue.esm.js","sources":["../src/utils/index.ts","../src/reactivity/effect.ts","../src/reactivity/baseHandler.ts","../src/reactivity/reactive.ts","../src/reactivity/ref.ts","../src/reactivity/computed.ts","../src/runtime-core/componentPublicInstance.ts","../src/runtime-core/componentProps.ts","../src/runtime-core/componentEmit.ts","../src/runtime-core/componentSlots.ts","../src/runtime-core/component.ts","../src/runtime-core/vnode.ts","../src/runtime-core/createApp.ts","../src/runtime-core/renderer.ts","../src/runtime-core/h.ts","../src/runtime-core/helpers/renderSlosts.ts","../src/runtime-core/apiInject.ts","../src/runtime-dom/index.ts"],"sourcesContent":["export function isObject(params) {\n  return typeof params === \"object\" && params !== null;\n}\nexport const extend = Object.assign;\n\nexport const hasChanged = (value: any, oldValue: any): boolean =>\n  !Object.is(value, oldValue);\n\nexport const hasOwn = (val, key) => Object.hasOwnProperty.call(val, key);\n\nexport const camelize = (str: string) =>\n  str.replace(/-(\\w)/, (_, target: string) => {\n    return capitalize(target);\n  });\n\nexport const capitalize = (str: string) =>\n  str.charAt(0) ? str.charAt(0).toUpperCase() + str.slice(1) : \"\";\n\nexport function toHandlerKey(str: string) {\n  return \"on\" + camelize(capitalize(str));\n}\n","import { extend } from \"../utils\";\nimport { Target } from \"./reactive\";\n\ntype Dep = Set<ReactiveEffect>;\ntype KeyToDepMap = Map<any, Dep>;\nconst targetMap = new Map<any, KeyToDepMap>();\n\nlet activeEffect: ReactiveEffect | null = null;\nlet shouldTrack = true;\n\ntype ReactiveEffectOptions = {\n  onStop?: () => void;\n  scheduler?: EffectScheduler;\n};\nexport type EffectScheduler = (...args: any[]) => any;\nexport class ReactiveEffect {\n  active = true;\n  deps: Dep[] = [];\n  onStop?: () => void;\n  constructor(public fn, public scheduler?: EffectScheduler) {}\n  run() {\n    if (!this.active) {\n      return this.fn();\n    }\n    shouldTrack = true;\n    activeEffect = this;\n    const result = this.fn();\n    shouldTrack = false;\n    return result;\n  }\n  stop() {\n    shouldTrack = false;\n    if (this.active) {\n      cleanup(this);\n      this.active = false;\n      if (this?.onStop) {\n        this.onStop();\n      }\n    }\n  }\n}\n\nfunction cleanup(effect: ReactiveEffect) {\n  effect.deps.forEach((dep) => {\n    dep.delete(effect);\n  });\n}\n\nexport function effect(fn, options?: ReactiveEffectOptions) {\n  const _effect = new ReactiveEffect(fn, options?.scheduler);\n  _effect.run();\n  // extends onStop to _effect if exist\n  extend(_effect, options);\n  const runner: any = _effect.run.bind(_effect);\n  // so we can find runner's effect\n  runner.effect = _effect;\n  return runner;\n}\n\nexport function stop(runner) {\n  runner.effect.stop();\n}\n\nexport function trigger(target: Target, key: string | symbol) {\n  let depsMap = targetMap.get(target);\n  if (!depsMap) return;\n  const deps = depsMap.get(key);\n  if (!deps) return;\n  triggerEffects(deps);\n}\n\nexport function triggerEffects(dep: Dep) {\n  dep.forEach((effect) => {\n    if (effect?.scheduler) {\n      effect.scheduler();\n    } else {\n      effect.run();\n    }\n  });\n}\n\nexport function isTracking() {\n  return activeEffect && shouldTrack;\n}\n\nexport function track(target: Target, key: string | symbol) {\n  if (!isTracking()) {\n    return;\n  }\n  let depsMap = targetMap.get(target);\n  if (!depsMap) {\n    targetMap.set(target, (depsMap = new Map()));\n  }\n  let dep = depsMap.get(key);\n  if (!dep) {\n    depsMap.set(key, (dep = new Set()));\n  }\n  trackEffects(dep);\n}\n\nexport function trackEffects(dep: Dep) {\n  if (activeEffect) {\n    dep.add(activeEffect);\n    activeEffect.deps.push(dep);\n  }\n}\n","import { isObject, extend } from \"../utils\";\nimport { track, trigger } from \"./effect\";\nimport { reactive, readonly, ReactiveFlags, Target } from \"./reactive\";\n\nconst get = createGetter();\nconst set = createSetter();\nexport const mutableHandler = {\n  get: get,\n  set: set,\n};\n\nconst readonlyGet = createGetter(true);\nconst shallowReadonlyGet = createGetter(true, true);\n\nexport const readonlyHandler = {\n  get: readonlyGet,\n  set(target, key) {\n    console.warn(`set readonly target key: ${key} failed`, target);\n    return target[key];\n  },\n};\n\nexport const shallowReadonlyHandler = extend({}, readonlyHandler, {\n  get: shallowReadonlyGet,\n});\n\nfunction isSKIP(target: Target) {\n  return target[ReactiveFlags.SKIP];\n}\nfunction createGetter(isReadonly = false, isShallow = false) {\n  return function get(target, key) {\n    if (key === ReactiveFlags.IS_REACTIVE) {\n      return !isReadonly;\n    }\n    if (key === ReactiveFlags.IS_READONLY) {\n      return isReadonly;\n    }\n    const res = target[key];\n    if (isShallow) {\n      return res;\n    }\n    // 即使是一个markRow的对象也需要先把依赖收集着，因为后边可能就不需要markRow了，不能把依赖给丢掉\n    if (!isReadonly) {\n      track(target, key);\n    }\n    // markRow之后就不需要再继续reative了\n    if (isObject(res)) {\n      if (isSKIP(res)) {\n        return res;\n      }\n      return isReadonly ? readonly(res) : reactive(res);\n    }\n\n    return res;\n  };\n}\n\nfunction createSetter() {\n  return function set(target, key, value) {\n    const res = Reflect.set(target, key, value);\n    trigger(target, key);\n    return res;\n  };\n}\n","import { def } from \"../shared\";\nimport {\n  mutableHandler,\n  readonlyHandler,\n  shallowReadonlyHandler,\n} from \"./baseHandler\";\n\nexport const enum ReactiveFlags {\n  SKIP = \"__v_skip\",\n  IS_REACTIVE = \"__v_isReactive\",\n  IS_READONLY = \"__v_isReadonly\",\n  RAW = \"__v_raw\",\n}\n\nexport interface Target {\n  [ReactiveFlags.SKIP]?: boolean;\n  [ReactiveFlags.IS_REACTIVE]?: boolean;\n  [ReactiveFlags.IS_READONLY]?: boolean;\n  [ReactiveFlags.RAW]?: any;\n}\n\nexport function reactive(raw: any) {\n  return createActiveObject(raw, mutableHandler);\n}\n\nexport function readonly(raw: any) {\n  return createActiveObject(raw, readonlyHandler);\n}\n\nexport function shallowReadonly(raw: any) {\n  return createActiveObject(raw, shallowReadonlyHandler);\n}\n\nfunction createActiveObject(raw: any, handler) {\n  return new Proxy(raw, handler);\n}\n\nexport function isReactive(observed) {\n  return !!observed && !!observed[ReactiveFlags.IS_REACTIVE];\n}\n\nexport function isReadonly(observed) {\n  return !!observed && !!observed[ReactiveFlags.IS_READONLY];\n}\nexport function isProxy(value: unknown) {\n  return isReactive(value) || isReadonly(value);\n}\n\nexport function markRaw<T extends object>(raw: T) {\n  def(raw, ReactiveFlags.SKIP, true);\n  return raw;\n}\n","import {\n  isTracking,\n  ReactiveEffect,\n  trackEffects,\n  triggerEffects,\n} from \"./effect\";\nimport { hasChanged, isObject } from \"../utils\";\nimport { reactive } from \"./reactive\";\n\ntype Ref<T = any> = {\n  value: T;\n};\n\ntype RefBase<T> = {\n  dep?: any;\n  value: T;\n};\n\nclass RefImpl<T> {\n  dep = new Set<ReactiveEffect>();\n  private __v_isRef = true;\n  private _value: T;\n  private _rawValue: T;\n  constructor(_value: T) {\n    this._rawValue = _value;\n    this._value = convert(_value);\n  }\n\n  get value(): T {\n    trackRefValue(this);\n    return this._value;\n  }\n  set value(newValue: any) {\n    if (hasChanged(this._rawValue, newValue)) {\n      this._rawValue = newValue;\n      this._value = convert(newValue);\n      triggerEffects(this.dep);\n    }\n  }\n}\n\nfunction convert(value) {\n  return isObject(value) ? reactive(value) : value;\n}\n\nexport function trackRefValue(ref: RefBase<any>) {\n  if (isTracking()) {\n    trackEffects(ref.dep);\n  }\n}\n\nexport function ref<T>(raw: T) {\n  const refObj = new RefImpl(raw);\n  return refObj;\n}\n\nexport function isRef<T>(raw: Ref<T> | any): raw is Ref<T> {\n  return !!(raw && raw.__v_isRef);\n}\n\nexport function unRef<T>(raw: Ref<T> | T) {\n  return isRef(raw) ? raw.value : raw;\n}\n\nexport function proxyRefs(raw) {\n  return new Proxy(raw, {\n    get(target, key) {\n      const value = Reflect.get(target, key);\n      return unRef(value);\n    },\n    set(target, key, newValue) {\n      const value = Reflect.get(target, key);\n      if (isRef(value) && !isRef(newValue)) {\n        return (value.value = newValue);\n      } else {\n        return Reflect.set(target, key, newValue);\n      }\n    },\n  });\n}\n","import { ReactiveEffect } from \"./effect\";\n\nclass ComputedImpl {\n  private _value: any = null;\n  private _dirty = true;\n  private _effect: ReactiveEffect;\n  constructor(fn) {\n    this._effect = new ReactiveEffect(fn, () => {\n      this._dirty = true;\n    });\n  }\n  get value() {\n    if (this._dirty) {\n      this._value = this._effect.run();\n      this._dirty = false;\n    }\n    return this._value;\n  }\n}\n\nexport function computed(fn: Function) {\n  return new ComputedImpl(fn);\n}\n","import { hasOwn } from \"../utils\";\nimport { ComponentInternalInstance } from \"./component\";\n\nconst publicPropertiesMap = {\n  $el: (i: ComponentInternalInstance) => i.vnode.el,\n  $slots: (i: ComponentInternalInstance) => i.slots,\n} as const;\n\nexport const PublicInstanceProxyHandlers = {\n  get({ _: instance }: { _: ComponentInternalInstance }, key) {\n    const { setupState, props } = instance;\n    if (hasOwn(setupState, key)) {\n      return setupState[key];\n    }\n    if (hasOwn(props, key)) {\n      return props[key];\n    }\n    const publicHandler = publicPropertiesMap[key];\n    if (publicHandler) {\n      return publicHandler(instance);\n    }\n  },\n};\n","import { ComponentInternalInstance } from \"./component\";\n\nexport function initProps(instance: ComponentInternalInstance, rawProps) {\n  instance.props = rawProps ?? {};\n}\n","import { toHandlerKey } from \"../utils\";\nimport { ComponentInternalInstance } from \"./component\";\n\nexport function emit(\n  instance: ComponentInternalInstance,\n  eventName: string,\n  ...args: any\n) {\n  //  const  toHandlerKey =\n  const handlerName = toHandlerKey(eventName);\n  const handler = instance.props[handlerName];\n  if (handler) {\n    handler(args);\n  }\n}\n","import { ShapeFlags } from \"../shared/shapeFlags\";\nimport { ComponentInternalInstance } from \"./component\";\n\nexport function initSlots(instance: ComponentInternalInstance, children) {\n  const { vnode } = instance;\n  if (vnode.shapeFlag & ShapeFlags.SLOTS_CHILDREN) {\n    normalizeObjectSlots(children, (instance.slots = {}));\n  }\n}\n\nfunction normalizeObjectSlots(children: any, slots) {\n  for (const key in children) {\n    const value = children[key];\n    slots[key] = (props) => normalizeSlotValue(value(props));\n  }\n}\nfunction normalizeSlotValue(value) {\n  return Array.isArray(value) ? value : [value];\n}\n","import { isObject } from \"../utils\";\nimport { VNode } from \"./vnode\";\nimport { PublicInstanceProxyHandlers } from \"./componentPublicInstance\";\nimport { initProps } from \"./componentProps\";\nimport { readonly } from \"../reactivity/reactive\";\nimport { emit } from \"./componentEmit\";\nimport { initSlots } from \"./componentSlots\";\nimport { proxyRefs } from \"../reactivity\";\n\nexport type ComponentInternalInstance = {\n  vnode: VNode;\n  type: VNode[\"type\"];\n  setupState: any;\n  emit: (eventName: string) => void;\n  slots: {};\n  proxy?: any;\n  render?: Function;\n  props?: any;\n  parent: ComponentInternalInstance | null;\n  provides: {};\n  isMounted: boolean;\n  subTree: any;\n};\n\nexport function createComponentInstance(\n  vnode: VNode,\n  parent: ComponentInternalInstance | null\n) {\n  const component: ComponentInternalInstance = {\n    vnode,\n    type: vnode.type,\n    setupState: {},\n    emit: () => {},\n    slots: {},\n    parent,\n    provides: parent ? parent.provides : {},\n    isMounted: false,\n    subTree: null,\n  };\n  component.emit = emit.bind(null, component);\n  return component;\n}\n\nexport function setupComponent(instance: ComponentInternalInstance) {\n  initProps(instance, instance.vnode.props);\n  initSlots(instance, instance.vnode.children);\n  setupStatefulComponent(instance);\n}\n\nfunction setupStatefulComponent(instance: ComponentInternalInstance) {\n  const Component = instance.type;\n  instance.proxy = new Proxy({ _: instance }, PublicInstanceProxyHandlers);\n  const { setup } = Component;\n  if (setup) {\n    setCurrentInstance(instance);\n    const setupResult = setup(readonly(instance.props), {\n      emit: instance.emit,\n    });\n    setCurrentInstance(null);\n    handleSetupResult(instance, setupResult);\n  }\n}\n\nfunction handleSetupResult(\n  instance: ComponentInternalInstance,\n  setupResult: any\n) {\n  if (isObject(setupResult)) {\n    // extends object\n    instance.setupState = proxyRefs(setupResult);\n  }\n  finishComponentSetup(instance);\n}\n\nfunction finishComponentSetup(instance: ComponentInternalInstance) {\n  const Component = instance.type;\n  if (Component.render) {\n    instance.render = Component.render;\n  }\n}\n\nlet currentInstance: ComponentInternalInstance | null = null;\nexport function getCurrentInstance() {\n  return currentInstance;\n}\n\nfunction setCurrentInstance(instance: ComponentInternalInstance | null) {\n  currentInstance = instance;\n}\n","import { ShapeFlags } from \"../shared/shapeFlags\";\n\nexport const Fragment = Symbol(\"Fragment\");\nexport const Text = Symbol(\"Text\");\n\nexport type VNode = {\n  type: any;\n  props: any;\n  children: string | VNodeArrayChildren;\n  el: null | HTMLElement;\n  shapeFlag: number;\n};\n\nexport type VNodeArrayChildren = any[];\n\nexport function createVNode(type, props?, children?) {\n  const vnode: VNode = {\n    type,\n    props,\n    children,\n    el: null,\n    shapeFlag: getShapeFlag(type),\n  };\n  // 基于 children 再次设置 shapeFlag\n\n  normalizeChildren(vnode, children);\n\n  return vnode;\n}\n\nexport function normalizeChildren(vnode: VNode, children) {\n  if (Array.isArray(children)) {\n    vnode.shapeFlag |= ShapeFlags.ARRAY_CHILDREN;\n  } else if (typeof children === \"string\") {\n    vnode.shapeFlag |= ShapeFlags.TEXT_CHILDREN;\n  }\n  if (vnode.shapeFlag & ShapeFlags.STATEFUL_COMPONENT) {\n    if (typeof children === \"object\") {\n      vnode.shapeFlag = vnode.shapeFlag | ShapeFlags.SLOTS_CHILDREN;\n    }\n  }\n}\n\nexport function createTextVNode(text: string) {\n  return createVNode(Text, {}, text);\n}\n// 基于 type 来判断是什么类型的组件\nfunction getShapeFlag(type: any) {\n  return typeof type === \"string\"\n    ? ShapeFlags.ELEMENT\n    : ShapeFlags.STATEFUL_COMPONENT;\n}\n","import { createVNode } from \"./vnode\";\n\nexport function createAppApi(render) {\n  return function createApp(rootComponent) {\n    return {\n      mount(rootContainer: HTMLElement) {\n        const vnode = createVNode(rootComponent);\n        render(vnode, rootContainer, null);\n      },\n    };\n  };\n}\n","import { effect } from \"../reactivity\";\nimport { ShapeFlags } from \"../shared/shapeFlags\";\nimport {\n  ComponentInternalInstance,\n  createComponentInstance,\n  setupComponent,\n} from \"./component\";\nimport { createAppApi } from \"./createApp\";\nimport { Fragment, Text, VNode, VNodeArrayChildren } from \"./vnode\";\n\nexport function createRenderer(option) {\n  const { createElement, patchProps, insert } = option;\n  return {\n    createApp: createAppApi(render),\n  };\n  function render(\n    vnode: VNode,\n    container: HTMLElement,\n    parent: ComponentInternalInstance | null\n  ) {\n    patch(null, vnode, container, parent);\n  }\n\n  function patch(\n    n1: VNode | null,\n    n2: VNode,\n    container: HTMLElement,\n    parent: ComponentInternalInstance | null\n  ) {\n    const { shapeFlag, type } = n2;\n\n    switch (type) {\n      case Fragment:\n        processFragment(n2, container, parent);\n        break;\n\n      case Text:\n        processText(n2, container);\n        break;\n      default:\n        if (shapeFlag & ShapeFlags.ELEMENT) {\n          processElement(n1, n2, container, parent);\n        } else if (shapeFlag & ShapeFlags.STATEFUL_COMPONENT) {\n          processComponent(n2, container, parent);\n        }\n        break;\n    }\n  }\n\n  function processElement(\n    n1: VNode | null,\n    n2: VNode,\n    container: HTMLElement,\n    parent: ComponentInternalInstance | null\n  ) {\n    if (n1) {\n      patchElement(n1, n2, container, parent);\n    } else {\n      mountElement(n2, container, parent);\n    }\n  }\n\n  function patchElement(\n    n1: VNode | null,\n    n2: VNode,\n    container: HTMLElement,\n    parent: ComponentInternalInstance | null\n  ) {\n    console.log(\"patchElement\");\n    console.log(\"n1\", n1);\n    console.log(\"n2\", n2);\n  }\n  function mountElement(\n    n2: VNode,\n    container: HTMLElement,\n    parent: ComponentInternalInstance | null\n  ) {\n    // create Element\n    const el = (n2.el = createElement(n2.type as string));\n    const { children, props } = n2;\n\n    if (typeof children === \"string\") {\n      el.textContent = children;\n    } else if (Array.isArray(children)) {\n      mountChildren(n2, el, parent);\n    }\n\n    for (const key in props) {\n      const val = props[key];\n      // patch props\n      patchProps(el, key, val);\n    }\n    // insert\n    insert(container, el);\n  }\n\n  function mountChildren(\n    n2: VNode,\n    container: HTMLElement,\n    parent: ComponentInternalInstance | null\n  ) {\n    (n2.children as VNodeArrayChildren).forEach((item) => {\n      patch(null, item, container, parent);\n    });\n  }\n\n  function processFragment(\n    n2: VNode,\n    container: HTMLElement,\n    parent: ComponentInternalInstance | null\n  ) {\n    mountChildren(n2, container, parent);\n  }\n\n  function processText(n2: VNode, container: HTMLElement) {\n    const { children } = n2;\n    const textNode = (n2.el = document.createTextNode(\n      children as string\n    ) as any);\n    container.append(textNode);\n  }\n\n  function processComponent(\n    n2: VNode,\n    container: HTMLElement,\n    parent: ComponentInternalInstance | null\n  ) {\n    mountComponent(n2, container, parent);\n  }\n\n  function mountComponent(\n    n2: VNode,\n    container: HTMLElement,\n    parent: ComponentInternalInstance | null\n  ) {\n    const instance = createComponentInstance(n2, parent);\n    setupComponent(instance);\n    setupRenderEffect(instance, n2, container);\n  }\n\n  function setupRenderEffect(\n    instance: ComponentInternalInstance,\n    vnode: VNode,\n    container: HTMLElement\n  ) {\n    effect(() => {\n      // TODO maybe sometime don't need this if\n      if (!instance.render) {\n        return;\n      }\n      if (instance.isMounted) {\n        const subTree = instance.render.call(instance.proxy);\n        const { subTree: preSubTree } = instance;\n        console.log(\"update\");\n        console.log(\"update pre\", preSubTree);\n        console.log(\"update current\", subTree);\n        instance.subTree = subTree;\n        patch(preSubTree, subTree, container, instance);\n      } else {\n        const subTree = (instance.subTree = instance.render.call(\n          instance.proxy\n        ));\n        patch(null, subTree, container, instance);\n\n        vnode.el = subTree.el;\n        instance.isMounted = true;\n      }\n    });\n  }\n}\n","import { createVNode } from \"./vnode\";\n\nexport const h = createVNode;\n","import { createVNode, Fragment } from \"../vnode\";\n\nexport function renderSlots(slots, name, props) {\n  const slot = slots[name];\n\n  if (slot && typeof slot === \"function\") {\n    return createVNode(Fragment, {}, slot(props));\n  }\n}\n","import { getCurrentInstance } from \"./component\";\n\nexport function provide(key, value) {\n  const currentInstance = getCurrentInstance();\n  if (currentInstance) {\n    let { provides } = currentInstance;\n    const parentProvides = currentInstance.parent?.provides;\n    if (parentProvides === provides) {\n      provides = currentInstance.provides = Object.create(parentProvides);\n    }\n\n    provides[key] = value;\n  }\n}\nexport function inject(key, defaultValue?) {\n  const currentInstance = getCurrentInstance();\n  if (currentInstance) {\n    const parentProvides = currentInstance.parent?.provides;\n    if (!parentProvides) {\n      return;\n    }\n    if (key in parentProvides) {\n      return currentInstance.parent?.provides[key];\n    } else if (defaultValue !== undefined) {\n      if (typeof defaultValue === \"function\") {\n        return defaultValue();\n      } else {\n        return defaultValue;\n      }\n    }\n  }\n}\n","import { createRenderer } from \"../runtime-core/renderer\";\nexport * from \"../runtime-core\";\n\nexport function createElement(type) {\n  return document.createElement(type);\n}\n\nexport function patchProps(el, key, val) {\n  const reg = /^on[A-Z]/;\n  if (key.match(reg)) {\n    const eventName = key.slice(2).toLowerCase();\n    el.addEventListener(eventName, val);\n  } else {\n    el.setAttribute(key, val);\n  }\n}\n\nexport function insert(container, element) {\n  container.appendChild(element);\n}\n\nexport function createApp(args) {\n  const renderer = createRenderer({\n    createElement,\n    patchProps,\n    insert,\n  });\n\n  return renderer.createApp(args);\n}\n"],"names":[],"mappings":"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"}